using System;
using System.Windows.Controls;
using System.Collections.Generic;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace µ.Display
{
	public enum PaletteType
	{
		Default,
		Gray,
		Binary,
		Gradient,
		Rainbow,
		Temperature,
		InvertedGray,
		Gamma_1_1,
		Gamma_1_3,
		Gamma_1_5,
		Gamma_1_7,
		Gamma_1_9,
		Gamma_2_1,
		Gamma_2_3,
		Gamma_2_5
	}

	public partial class uImageControl : Control
	{
		private PaletteType _previousPaletteType;

		public PaletteType Palette
		{
			get{ return (PaletteType)GetValue(PaletteProperty); }
			set{ SetValue(PaletteProperty, value); }
		}
	}

	public static class µPalette
	{
		private static readonly byte[] Rainbow = new byte[256*3]
		{
			0,0,255, 0,4,255, 0,8,255, 0,12,255, 0,16,255, 0,20,255, 0,24,255, 0,28,255, 0,32,255, 0,36,255, 0,40,255, 0,44,255,0,48,255,0,52,255,0,56,255,0,60,255,0,64,255,0,68,255,0,72,255,0,76,255,0,80,255,0,84,255,0,88,255,0,92,255,0,96,255,0,100,255,0,104,255,0,108,255,0,112,255,0,116,255,0,120,255,0,124,255,0,128,255,0,132,255,0,136,255,0,140,255,0,144,255,0,148,255,0,152,255,0,156,255,0,160,255,0,164,255,0,168,255,0,172,255,0,176,255,0,180,255,0,184,255,0,188,255,0,192,255,0,196,255,0,200,255,0,204,255,0,208,255,0,212,255,0,216,255,0,220,255,0,224,255,0,228,255,0,232,255,0,236,255,0,240,255,0,244,255,0,248,255,0,252,255,0,255,255,0,255,251,0,255,247,0,255,243,0,255,239,0,255,235,0,255,231,0,255,227,0,255,223,0,255,219,0,255,215,0,255,211,0,255,207,0,255,203,0,255,199,0,255,195,0,255,191,0,255,187,0,255,183,0,255,179,0,255,175,0,255,171,0,255,167,0,255,163,0,255,159,0,255,155,0,255,151,0,255,147,0,255,143,0,255,139,0,255,135,0,255,131,0,255,127,0,255,123,0,255,119,0,255,115,0,255,111,0,255,107,0,255,103,0,255,99,0,255,95,0,255,91,0,255,87,0,255,83,0,255,79,0,255,75,0,255,71,0,255,67,0,255,63,0,255,59,0,255,55,0,255,51,0,255,47,0,255,43,0,255,39,0,255,35,0,255,31,0,255,27,0,255,23,0,255,19,0,255,15,0,255,11,0,255,7,0,255,3,0,255,0,4,255,0,8,255,0,12,255,0,16,255,0,20,255,0,24,255,0,28,255,0,32,255,0,36,255,0,40,255,0,44,255,0,48,255,0,52,255,0,56,255,0,60,255,0,64,255,0,68,255,0,72,255,0,76,255,0,80,255,0,84,255,0,88,255,0,92,255,0,96,255,0,100,255,0,104,255,0,108,255,0,112,255,0,116,255,0,120,255,0,124,255,0,128,255,0,132,255,0,136,255,0,140,255,0,144,255,0,148,255,0,152,255,0,156,255,0,160,255,0,164,255,0,168,255,0,172,255,0,176,255,0,180,255,0,184,255,0,188,255,0,192,255,0,196,255,0,200,255,0,204,255,0,208,255,0,212,255,0,216,255,0,220,255,0,224,255,0,228,255,0,232,255,0,236,255,0,240,255,0,244,255,0,248,255,0,252,255,0,255,255,0,255,251,0,255,247,0,255,243,0,255,239,0,255,235,0,255,231,0,255,227,0,255,223,0,255,219,0,255,215,0,255,211,0,255,207,0,255,203,0,255,199,0,255,195,0,255,191,0,255,187,0,255,183,0,255,179,0,255,175,0,255,171,0,255,167,0,255,163,0,255,159,0,255,155,0,255,151,0,255,147,0,255,143,0,255,139,0,255,135,0,255,131,0,255,127,0,255,123,0,255,119,0,255,115,0,255,111,0,255,107,0,255,103,0,255,99,0,255,95,0,255,91,0,255,87,0,255,83,0,255,79,0,255,75,0,255,71,0,255,67,0,255,63,0,255,59,0,255,55,0,255,51,0,255,47,0,255,43,0,255,39,0,255,35,0,255,31,0,255,27,0,255,23,0,255,19,0,255,15,0,255,11,0,255,7,0,255,3,0
		};

		private static readonly byte[] Gradient = new byte[256*3]
		{
			0,0,0, 9,0,0, 18,0,0, 27,0,0, 36,0,0, 45,0,0, 54,0,0, 63,0,0, 72,0,0, 81,0,0, 90,0,0, 99,0,0, 108,0,0, 117,0,0, 126,0,0,135,0,0,144,0,0,148,0,0,152,0,0,156,0,0,160,0,0,164,0,0,168,0,0,172,0,0,176,0,0,180,0,0,184,0,0,188,0,0,192,0,0,196,0,0,200,0,0,204,0,0,208,0,0,210,0,0,212,0,0,214,0,0,216,0,0,218,0,0,220,0,0,222,0,0,224,0,0,226,0,0,228,0,0,230,0,0,232,0,0,234,0,0,236,0,0,238,0,0,240,0,0,240,6,0,240,12,0,240,18,0,240,24,0,240,30,0,240,36,0,240,42,0,240,48,0,240,54,0,240,60,0,240,66,0,240,72,0,240,78,0,240,84,0,240,90,0,240,96,0,240,100,0,240,104,0,240,108,0,240,112,0,240,116,0,240,120,0,240,124,0,240,128,0,240,132,0,240,136,0,240,140,0,240,144,0,240,148,0,240,152,0,240,156,0,240,160,0,239,163,0,238,166,0,237,169,0,236,172,0,235,175,0,234,178,0,233,181,0,232,184,0,231,187,0,230,190,0,229,193,0,228,196,0,227,199,0,226,202,0,225,205,0,224,208,0,220,210,0,216,212,0,212,214,0,208,216,0,204,218,0,200,220,0,196,222,0,192,224,0,188,226,0,184,228,0,180,230,0,176,232,0,172,234,0,168,236,0,164,238,0,160,240,0,158,240,6,156,240,12,154,240,18,152,240,24,150,240,30,148,240,36,146,240,42,144,240,48,142,240,54,140,240,60,138,240,66,136,240,72,134,240,78,132,240,84,130,240,90,128,240,96,127,240,101,126,240,106,125,240,111,124,240,116,123,240,121,122,240,126,121,240,131,120,240,136,119,240,141,118,240,146,117,240,151,116,240,156,115,240,161,114,240,166,113,240,171,112,240,176,111,238,179,110,236,182,109,234,185,108,232,188,107,230,191,106,228,194,105,226,197,104,224,200,103,222,203,102,220,206,101,218,209,100,216,212,99,214,215,98,212,218,97,210,221,96,208,224,97,208,225,98,208,226,99,208,227,100,208,228,101,208,229,102,208,230,103,208,231,104,208,232,105,208,233,106,208,234,107,208,235,108,208,236,109,208,237,110,208,238,111,208,239,112,208,240,113,209,240,114,210,240,115,211,240,116,212,240,117,213,240,118,214,240,119,215,240,120,216,240,121,217,240,122,218,240,123,219,240,124,220,240,125,221,240,126,222,240,127,223,240,128,224,240,130,225,239,132,226,238,134,227,237,136,228,236,138,229,235,140,230,234,142,231,233,144,232,232,146,233,231,148,234,230,150,235,229,152,236,228,154,237,227,156,238,226,158,239,225,160,240,224,162,240,224,164,240,224,166,240,224,168,240,224,170,240,224,172,240,224,174,240,224,176,240,224,178,240,224,180,240,224,182,240,224,184,240,224,186,240,224,188,240,224,190,240,224,192,240,224,194,240,224,196,240,224,198,240,224,200,240,224,202,240,224,204,240,224,206,240,224,208,240,224,210,240,224,212,240,224,214,240,224,216,240,224,218,240,224,220,240,224,222,240,224,224,240,224,225,240,225,226,240,226,227,240,227,228,240,228,229,240,229,230,240,230,231,240,231,232,240,232,233,240,233,234,240,234,235,240,235,236,240,236,237,240,237,238,240,238,239,240,239
		};

		private static readonly byte[] Temperature = new byte[256*3]
		{
			0,0,0,1,0,0,2,0,0,3,0,0,4,0,0,5,0,0,6,0,0,7,0,0,8,0,0,9,0,0,10,0,0,11,0,0,12,0,0,13,0,0,14,0,0,15,0,0,16,0,0,17,0,0,18,0,0,19,0,0,20,0,0,21,0,0,22,0,0,23,0,0,24,0,0,25,0,0,26,0,0,27,0,0,28,0,0,29,0,0,30,0,0,31,0,0,32,0,0,33,0,0,34,0,0,35,0,0,36,0,0,37,0,0,38,0,0,39,0,0,40,0,0,41,0,0,42,0,0,43,0,0,44,0,0,45,0,0,46,0,0,47,0,0,48,0,0,49,0,0,50,0,0,51,0,0,52,0,0,53,0,0,54,0,0,55,0,0,56,0,0,57,0,0,58,0,0,59,0,0,60,0,0,61,0,0,62,0,0,63,0,0,64,0,0,65,0,0,66,0,0,67,0,0,68,0,0,69,0,0,70,0,0,71,0,0,72,0,0,73,0,0,74,0,0,75,0,0,76,0,0,77,0,0,78,0,0,79,0,0,80,0,0,81,0,0,82,0,0,83,0,0,84,0,0,85,0,0,86,0,0,87,0,0,88,0,0,89,0,0,90,0,0,91,0,0,92,0,0,93,0,0,94,0,0,95,0,0,96,0,0,97,0,0,98,0,0,99,0,0,100,0,0,101,0,0,102,0,0,103,0,0,104,0,0,105,1,0,106,3,0,107,5,0,108,6,0,109,8,0,110,10,0,111,11,0,112,13,0,113,15,0,114,16,0,115,18,0,116,20,0,117,21,0,118,23,0,119,25,0,120,27,0,121,28,0,122,30,0,123,32,0,124,33,0,125,35,0,126,37,0,127,38,0,128,40,0,129,42,0,130,43,0,131,45,0,132,47,0,133,48,0,134,50,0,135,52,0,136,54,0,137,55,0,138,57,0,139,59,0,140,60,0,141,62,0,142,64,0,143,65,2,144,67,4,145,69,6,146,70,9,147,72,11,148,74,13,149,75,15,150,77,18,151,79,20,152,81,22,153,82,24,154,84,27,155,86,29,156,87,31,157,89,33,158,91,36,159,92,38,160,94,40,161,96,42,162,97,45,163,99,47,164,101,49,165,103,51,166,104,54,167,106,56,168,108,58,169,109,60,170,111,63,171,113,65,172,114,67,173,116,69,174,118,72,175,119,74,176,121,76,177,123,78,178,124,81,179,126,83,180,128,85,181,130,88,182,131,90,183,133,92,184,135,94,185,136,97,186,138,99,187,140,101,188,141,103,189,143,106,190,145,108,191,146,110,192,148,112,193,150,115,194,151,117,195,153,119,196,155,121,197,157,124,198,158,126,199,160,128,200,162,130,201,163,133,202,165,135,203,167,137,204,168,139,205,170,142,206,172,144,207,173,146,208,175,148,209,177,151,210,179,153,211,180,155,212,182,157,213,184,160,214,185,162,215,187,164,216,189,166,217,190,169,218,192,171,219,194,173,220,195,176,221,197,178,222,199,180,223,200,182,224,202,185,225,204,187,226,206,189,227,207,191,228,209,194,229,211,196,230,212,198,231,214,200,232,216,203,233,217,205,234,219,207,235,221,209,236,222,212,237,224,214,238,226,216,239,227,218,240,229,221,241,231,223,242,233,225,243,234,227,244,236,230,245,238,232,246,239,234,247,241,236,248,243,239,249,244,241,250,246,243,251,248,245,252,249,248,253,251,250,254,253,252,255,255,255
		};

		private static readonly byte[] Binary = new byte[256*3]
		{
			0,0,0,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,127,127,255,255,0,0,0,255,0,0,0,255,255,255,0,255,0,255,0,255,255,255,127,0,255,0,127,127,255,0,127,0,255,0,127,255,0,255,127,255,127,127,127,255,127,255,255,255
		};

		private static readonly byte[] Gray = new byte[256*3]
		{
			0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,30,30,30,31,31,31,32,32,32,33,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,39,39,39,40,40,40,41,41,41,42,42,42,43,43,43,44,44,44,45,45,45,46,46,46,47,47,47,48,48,48,49,49,49,50,50,50,51,51,51,52,52,52,53,53,53,54,54,54,55,55,55,56,56,56,57,57,57,58,58,58,59,59,59,60,60,60,61,61,61,62,62,62,63,63,63,64,64,64,65,65,65,66,66,66,67,67,67,68,68,68,69,69,69,70,70,70,71,71,71,72,72,72,73,73,73,74,74,74,75,75,75,76,76,76,77,77,77,78,78,78,79,79,79,80,80,80,81,81,81,82,82,82,83,83,83,84,84,84,85,85,85,86,86,86,87,87,87,88,88,88,89,89,89,90,90,90,91,91,91,92,92,92,93,93,93,94,94,94,95,95,95,96,96,96,97,97,97,98,98,98,99,99,99,100,100,100,101,101,101,102,102,102,103,103,103,104,104,104,105,105,105,106,106,106,107,107,107,108,108,108,109,109,109,110,110,110,111,111,111,112,112,112,113,113,113,114,114,114,115,115,115,116,116,116,117,117,117,118,118,118,119,119,119,120,120,120,121,121,121,122,122,122,123,123,123,124,124,124,125,125,125,126,126,126,127,127,127,128,128,128,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,135,135,135,136,136,136,137,137,137,138,138,138,139,139,139,140,140,140,141,141,141,142,142,142,143,143,143,144,144,144,145,145,145,146,146,146,147,147,147,148,148,148,149,149,149,150,150,150,151,151,151,152,152,152,153,153,153,154,154,154,155,155,155,156,156,156,157,157,157,158,158,158,159,159,159,160,160,160,161,161,161,162,162,162,163,163,163,164,164,164,165,165,165,166,166,166,167,167,167,168,168,168,169,169,169,170,170,170,171,171,171,172,172,172,173,173,173,174,174,174,175,175,175,176,176,176,177,177,177,178,178,178,179,179,179,180,180,180,181,181,181,182,182,182,183,183,183,184,184,184,185,185,185,186,186,186,187,187,187,188,188,188,189,189,189,190,190,190,191,191,191,192,192,192,193,193,193,194,194,194,195,195,195,196,196,196,197,197,197,198,198,198,199,199,199,200,200,200,201,201,201,202,202,202,203,203,203,204,204,204,205,205,205,206,206,206,207,207,207,208,208,208,209,209,209,210,210,210,211,211,211,212,212,212,213,213,213,214,214,214,215,215,215,216,216,216,217,217,217,218,218,218,219,219,219,220,220,220,221,221,221,222,222,222,223,223,223,224,224,224,225,225,225,226,226,226,227,227,227,228,228,228,229,229,229,230,230,230,231,231,231,232,232,232,233,233,233,234,234,234,235,235,235,236,236,236,237,237,237,238,238,238,239,239,239,240,240,240,241,241,241,242,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255,255,255
		};

		private static readonly byte[] GrayInverted = new byte[256*3]
		{
			255,255,255,254,254,254,253,253,253,252,252,252,251,251,251,250,250,250,249,249,249,248,248,248,247,247,247,246,246,246,245,245,245,244,244,244,243,243,243,242,242,242,241,241,241,240,240,240,239,239,239,238,238,238,237,237,237,236,236,236,235,235,235,234,234,234,233,233,233,232,232,232,231,231,231,230,230,230,229,229,229,228,228,228,227,227,227,226,226,226,225,225,225,224,224,224,223,223,223,222,222,222,221,221,221,220,220,220,219,219,219,218,218,218,217,217,217,216,216,216,215,215,215,214,214,214,213,213,213,212,212,212,211,211,211,210,210,210,209,209,209,208,208,208,207,207,207,206,206,206,205,205,205,204,204,204,203,203,203,202,202,202,201,201,201,200,200,200,199,199,199,198,198,198,197,197,197,196,196,196,195,195,195,194,194,194,193,193,193,192,192,192,191,191,191,190,190,190,189,189,189,188,188,188,187,187,187,186,186,186,185,185,185,184,184,184,183,183,183,182,182,182,181,181,181,180,180,180,179,179,179,178,178,178,177,177,177,176,176,176,175,175,175,174,174,174,173,173,173,172,172,172,171,171,171,170,170,170,169,169,169,168,168,168,167,167,167,166,166,166,165,165,165,164,164,164,163,163,163,162,162,162,161,161,161,160,160,160,159,159,159,158,158,158,157,157,157,156,156,156,155,155,155,154,154,154,153,153,153,152,152,152,151,151,151,150,150,150,149,149,149,148,148,148,147,147,147,146,146,146,145,145,145,144,144,144,143,143,143,142,142,142,141,141,141,140,140,140,139,139,139,138,138,138,137,137,137,136,136,136,135,135,135,134,134,134,133,133,133,132,132,132,131,131,131,130,130,130,129,129,129,128,128,128,127,127,127,126,126,126,125,125,125,124,124,124,123,123,123,122,122,122,121,121,121,120,120,120,119,119,119,118,118,118,117,117,117,116,116,116,115,115,115,114,114,114,113,113,113,112,112,112,111,111,111,110,110,110,109,109,109,108,108,108,107,107,107,106,106,106,105,105,105,104,104,104,103,103,103,102,102,102,101,101,101,100,100,100,99,99,99,98,98,98,97,97,97,96,96,96,95,95,95,94,94,94,93,93,93,92,92,92,91,91,91,90,90,90,89,89,89,88,88,88,87,87,87,86,86,86,85,85,85,84,84,84,83,83,83,82,82,82,81,81,81,80,80,80,79,79,79,78,78,78,77,77,77,76,76,76,75,75,75,74,74,74,73,73,73,72,72,72,71,71,71,70,70,70,69,69,69,68,68,68,67,67,67,66,66,66,65,65,65,64,64,64,63,63,63,62,62,62,61,61,61,60,60,60,59,59,59,58,58,58,57,57,57,56,56,56,55,55,55,54,54,54,53,53,53,52,52,52,51,51,51,50,50,50,49,49,49,48,48,48,47,47,47,46,46,46,45,45,45,44,44,44,43,43,43,42,42,42,41,41,41,40,40,40,39,39,39,38,38,38,37,37,37,36,36,36,35,35,35,34,34,34,33,33,33,32,32,32,31,31,31,30,30,30,29,29,29,28,28,28,27,27,27,26,26,26,25,25,25,24,24,24,23,23,23,22,22,22,21,21,21,20,20,20,19,19,19,18,18,18,17,17,17,16,16,16,15,15,15,14,14,14,13,13,13,12,12,12,11,11,11,10,10,10,9,9,9,8,8,8,7,7,7,6,6,6,5,5,5,4,4,4,3,3,3,2,2,2,1,1,1,0,0,0
		};

		private static readonly byte[] Gamma_1_1 = new byte[256*3]
		{
			0,0,0,2,2,2,3,3,3,4,4,4,6,6,6,7,7,7,8,8,8,10,10,10,11,11,11,12,12,12,13,13,13,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,29,29,29,30,30,30,31,31,31,32,32,32,33,33,33,34,34,34,35,35,35,36,36,36,38,38,38,39,39,39,40,40,40,41,41,41,42,42,42,43,43,43,44,44,44,45,45,45,46,46,46,47,47,47,48,48,48,49,49,49,51,51,51,52,52,52,53,53,53,54,54,54,55,55,55,56,56,56,57,57,57,58,58,58,59,59,59,60,60,60,61,61,61,62,62,62,63,63,63,64,64,64,65,65,65,66,66,66,67,67,67,68,68,68,69,69,69,71,71,71,72,72,72,73,73,73,74,74,74,75,75,75,76,76,76,77,77,77,78,78,78,79,79,79,80,80,80,81,81,81,82,82,82,83,83,83,84,84,84,85,85,85,86,86,86,87,87,87,88,88,88,89,89,89,90,90,90,91,91,91,92,92,92,93,93,93,94,94,94,95,95,95,96,96,96,97,97,97,98,98,98,99,99,99,100,100,100,101,101,101,102,102,102,103,103,103,104,104,104,105,105,105,106,106,106,107,107,107,108,108,108,109,109,109,110,110,110,111,111,111,112,112,112,113,113,113,114,114,114,115,115,115,116,116,116,117,117,117,118,118,118,119,119,119,120,120,120,121,121,121,122,122,122,123,123,123,124,124,124,125,125,125,126,126,126,127,127,127,128,128,128,129,129,129,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,135,135,135,136,136,136,137,137,137,138,138,138,139,139,139,140,140,140,141,141,141,142,142,142,143,143,143,144,144,144,145,145,145,146,146,146,147,147,147,148,148,148,149,149,149,150,150,150,151,151,151,152,152,152,153,153,153,154,154,154,155,155,155,156,156,156,156,156,156,157,157,157,158,158,158,159,159,159,160,160,160,161,161,161,162,162,162,163,163,163,164,164,164,165,165,165,166,166,166,167,167,167,168,168,168,169,169,169,170,170,170,171,171,171,172,172,172,173,173,173,174,174,174,174,174,174,175,175,175,176,176,176,177,177,177,178,178,178,179,179,179,180,180,180,181,181,181,182,182,182,183,183,183,184,184,184,185,185,185,186,186,186,187,187,187,188,188,188,189,189,189,190,190,190,190,190,190,191,191,191,192,192,192,193,193,193,194,194,194,195,195,195,196,196,196,197,197,197,198,198,198,199,199,199,200,200,200,201,201,201,202,202,202,203,203,203,204,204,204,204,204,204,205,205,205,206,206,206,207,207,207,208,208,208,209,209,209,210,210,210,211,211,211,212,212,212,213,213,213,214,214,214,215,215,215,216,216,216,217,217,217,217,217,217,218,218,218,219,219,219,220,220,220,221,221,221,222,222,222,223,223,223,224,224,224,225,225,225,226,226,226,227,227,227,228,228,228,228,228,228,229,229,229,230,230,230,231,231,231,232,232,232,233,233,233,234,234,234,235,235,235,236,236,236,237,237,237,238,238,238,239,239,239,239,239,239,240,240,240,241,241,241,242,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255,255,255
		};

		private static readonly byte[] Gamma_1_3 = new byte[256*3]
		{
			0,0,0,4,4,4,6,6,6,8,8,8,10,10,10,12,12,12,14,14,14,16,16,16,18,18,18,19,19,19,21,21,21,23,23,23,24,24,24,26,26,26,27,27,27,29,29,29,30,30,30,32,32,32,33,33,33,35,35,35,36,36,36,37,37,37,39,39,39,40,40,40,41,41,41,43,43,43,44,44,44,45,45,45,47,47,47,48,48,48,49,49,49,50,50,50,52,52,52,53,53,53,54,54,54,55,55,55,57,57,57,58,58,58,59,59,59,60,60,60,61,61,61,63,63,63,64,64,64,65,65,65,66,66,66,67,67,67,68,68,68,69,69,69,71,71,71,72,72,72,73,73,73,74,74,74,75,75,75,76,76,76,77,77,77,78,78,78,79,79,79,81,81,81,82,82,82,83,83,83,84,84,84,85,85,85,86,86,86,87,87,87,88,88,88,89,89,89,90,90,90,91,91,91,92,92,92,93,93,93,94,94,94,95,95,95,96,96,96,97,97,97,98,98,98,99,99,99,100,100,100,102,102,102,103,103,103,104,104,104,105,105,105,106,106,106,107,107,107,108,108,108,109,109,109,110,110,110,111,111,111,112,112,112,112,112,112,113,113,113,114,114,114,115,115,115,116,116,116,117,117,117,118,118,118,119,119,119,120,120,120,121,121,121,122,122,122,123,123,123,124,124,124,125,125,125,126,126,126,127,127,127,128,128,128,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,134,134,134,135,135,135,136,136,136,137,137,137,138,138,138,139,139,139,140,140,140,141,141,141,142,142,142,143,143,143,144,144,144,145,145,145,146,146,146,146,146,146,147,147,147,148,148,148,149,149,149,150,150,150,151,151,151,152,152,152,153,153,153,154,154,154,155,155,155,155,155,155,156,156,156,157,157,157,158,158,158,159,159,159,160,160,160,161,161,161,162,162,162,163,163,163,163,163,163,164,164,164,165,165,165,166,166,166,167,167,167,168,168,168,169,169,169,170,170,170,170,170,170,171,171,171,172,172,172,173,173,173,174,174,174,175,175,175,176,176,176,176,176,176,177,177,177,178,178,178,179,179,179,180,180,180,181,181,181,182,182,182,182,182,182,183,183,183,184,184,184,185,185,185,186,186,186,187,187,187,188,188,188,188,188,188,189,189,189,190,190,190,191,191,191,192,192,192,193,193,193,193,193,193,194,194,194,195,195,195,196,196,196,197,197,197,198,198,198,198,198,198,199,199,199,200,200,200,201,201,201,202,202,202,203,203,203,203,203,203,204,204,204,205,205,205,206,206,206,207,207,207,207,207,207,208,208,208,209,209,209,210,210,210,211,211,211,212,212,212,212,212,212,213,213,213,214,214,214,215,215,215,216,216,216,216,216,216,217,217,217,218,218,218,219,219,219,220,220,220,220,220,220,221,221,221,222,222,222,223,223,223,224,224,224,224,224,224,225,225,225,226,226,226,227,227,227,228,228,228,228,228,228,229,229,229,230,230,230,231,231,231,232,232,232,232,232,232,233,233,233,234,234,234,235,235,235,236,236,236,236,236,236,237,237,237,238,238,238,239,239,239,239,239,239,240,240,240,241,241,241,242,242,242,243,243,243,243,243,243,244,244,244,245,245,245,246,246,246,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,250,250,250,251,251,251,252,252,252,253,253,253,253,253,253,254,254,254,255,255,255
		};

		private static readonly byte[] Gamma_1_5 = new byte[256*3]
		{
			0,0,0,6,6,6,10,10,10,13,13,13,16,16,16,19,19,19,21,21,21,23,23,23,25,25,25,27,27,27,29,29,29,31,31,31,33,33,33,35,35,35,37,37,37,39,39,39,40,40,40,42,42,42,44,44,44,45,45,45,47,47,47,48,48,48,50,50,50,51,51,51,53,53,53,54,54,54,56,56,56,57,57,57,58,58,58,60,60,60,61,61,61,63,63,63,64,64,64,65,65,65,67,67,67,68,68,68,69,69,69,70,70,70,72,72,72,73,73,73,74,74,74,75,75,75,77,77,77,78,78,78,79,79,79,80,80,80,81,81,81,83,83,83,84,84,84,85,85,85,86,86,86,87,87,87,88,88,88,89,89,89,91,91,91,92,92,92,93,93,93,94,94,94,95,95,95,96,96,96,97,97,97,98,98,98,99,99,99,100,100,100,101,101,101,103,103,103,104,104,104,105,105,105,106,106,106,107,107,107,108,108,108,109,109,109,110,110,110,111,111,111,112,112,112,113,113,113,114,114,114,115,115,115,116,116,116,117,117,117,118,118,118,119,119,119,120,120,120,121,121,121,122,122,122,123,123,123,124,124,124,125,125,125,125,125,125,126,126,126,127,127,127,128,128,128,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,135,135,135,136,136,136,137,137,137,138,138,138,138,138,138,139,139,139,140,140,140,141,141,141,142,142,142,143,143,143,144,144,144,145,145,145,146,146,146,146,146,146,147,147,147,148,148,148,149,149,149,150,150,150,151,151,151,152,152,152,153,153,153,153,153,153,154,154,154,155,155,155,156,156,156,157,157,157,158,158,158,159,159,159,159,159,159,160,160,160,161,161,161,162,162,162,163,163,163,164,164,164,164,164,164,165,165,165,166,166,166,167,167,167,168,168,168,169,169,169,169,169,169,170,170,170,171,171,171,172,172,172,173,173,173,173,173,173,174,174,174,175,175,175,176,176,176,177,177,177,177,177,177,178,178,178,179,179,179,180,180,180,181,181,181,181,181,181,182,182,182,183,183,183,184,184,184,185,185,185,185,185,185,186,186,186,187,187,187,188,188,188,188,188,188,189,189,189,190,190,190,191,191,191,192,192,192,192,192,192,193,193,193,194,194,194,195,195,195,195,195,195,196,196,196,197,197,197,198,198,198,198,198,198,199,199,199,200,200,200,201,201,201,201,201,201,202,202,202,203,203,203,204,204,204,204,204,204,205,205,205,206,206,206,207,207,207,207,207,207,208,208,208,209,209,209,210,210,210,210,210,210,211,211,211,212,212,212,213,213,213,213,213,213,214,214,214,215,215,215,215,215,215,216,216,216,217,217,217,218,218,218,218,218,218,219,219,219,220,220,220,220,220,220,221,221,221,222,222,222,223,223,223,223,223,223,224,224,224,225,225,225,225,225,225,226,226,226,227,227,227,228,228,228,228,228,228,229,229,229,230,230,230,230,230,230,231,231,231,232,232,232,232,232,232,233,233,233,234,234,234,235,235,235,235,235,235,236,236,236,237,237,237,237,237,237,238,238,238,239,239,239,239,239,239,240,240,240,241,241,241,241,241,241,242,242,242,243,243,243,244,244,244,244,244,244,245,245,245,246,246,246,246,246,246,247,247,247,248,248,248,248,248,248,249,249,249,250,250,250,250,250,250,251,251,251,252,252,252,252,252,252,253,253,253,254,254,254,254,254,254,255,255,255
		};

		private static readonly byte[] Gamma_1_7 = new byte[256*3]
		{
			0,0,0,10,10,10,15,15,15,19,19,19,22,22,22,25,25,25,28,28,28,31,31,31,33,33,33,36,36,36,38,38,38,40,40,40,42,42,42,44,44,44,46,46,46,48,48,48,50,50,50,52,52,52,54,54,54,55,55,55,57,57,57,59,59,59,60,60,60,62,62,62,64,64,64,65,65,65,67,67,67,68,68,68,70,70,70,71,71,71,72,72,72,74,74,74,75,75,75,77,77,77,78,78,78,79,79,79,81,81,81,82,82,82,83,83,83,84,84,84,86,86,86,87,87,87,88,88,88,89,89,89,91,91,91,92,92,92,93,93,93,94,94,94,95,95,95,97,97,97,98,98,98,99,99,99,100,100,100,101,101,101,102,102,102,103,103,103,105,105,105,106,106,106,107,107,107,108,108,108,109,109,109,110,110,110,111,111,111,112,112,112,113,113,113,114,114,114,115,115,115,116,116,116,117,117,117,118,118,118,119,119,119,120,120,120,121,121,121,122,122,122,123,123,123,124,124,124,125,125,125,126,126,126,127,127,127,128,128,128,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,135,135,135,135,135,135,136,136,136,137,137,137,138,138,138,139,139,139,140,140,140,141,141,141,142,142,142,143,143,143,144,144,144,144,144,144,145,145,145,146,146,146,147,147,147,148,148,148,149,149,149,150,150,150,150,150,150,151,151,151,152,152,152,153,153,153,154,154,154,155,155,155,156,156,156,156,156,156,157,157,157,158,158,158,159,159,159,160,160,160,160,160,160,161,161,161,162,162,162,163,163,163,164,164,164,164,164,164,165,165,165,166,166,166,167,167,167,168,168,168,168,168,168,169,169,169,170,170,170,171,171,171,172,172,172,172,172,172,173,173,173,174,174,174,175,175,175,175,175,175,176,176,176,177,177,177,178,178,178,178,178,178,179,179,179,180,180,180,181,181,181,181,181,181,182,182,182,183,183,183,184,184,184,184,184,184,185,185,185,186,186,186,187,187,187,187,187,187,188,188,188,189,189,189,190,190,190,190,190,190,191,191,191,192,192,192,192,192,192,193,193,193,194,194,194,195,195,195,195,195,195,196,196,196,197,197,197,197,197,197,198,198,198,199,199,199,199,199,199,200,200,200,201,201,201,202,202,202,202,202,202,203,203,203,204,204,204,204,204,204,205,205,205,206,206,206,206,206,206,207,207,207,208,208,208,208,208,208,209,209,209,210,210,210,210,210,210,211,211,211,212,212,212,212,212,212,213,213,213,214,214,214,214,214,214,215,215,215,216,216,216,216,216,216,217,217,217,218,218,218,218,218,218,219,219,219,220,220,220,220,220,220,221,221,221,222,222,222,222,222,222,223,223,223,224,224,224,224,224,224,225,225,225,226,226,226,226,226,226,227,227,227,227,227,227,228,228,228,229,229,229,229,229,229,230,230,230,231,231,231,231,231,231,232,232,232,233,233,233,233,233,233,234,234,234,234,234,234,235,235,235,236,236,236,236,236,236,237,237,237,238,238,238,238,238,238,239,239,239,239,239,239,240,240,240,241,241,241,241,241,241,242,242,242,242,242,242,243,243,243,244,244,244,244,244,244,245,245,245,245,245,245,246,246,246,247,247,247,247,247,247,248,248,248,248,248,248,249,249,249,250,250,250,250,250,250,251,251,251,251,251,251,252,252,252,253,253,253,253,253,253,254,254,254,254,254,254,255,255,255
		};

		private static readonly byte[] Gamma_1_9 = new byte[256*3]
		{
			0,0,0,14,14,14,20,20,20,25,25,25,29,29,29,32,32,32,35,35,35,38,38,38,41,41,41,44,44,44,46,46,46,49,49,49,51,51,51,53,53,53,55,55,55,57,57,57,59,59,59,61,61,61,63,63,63,65,65,65,67,67,67,69,69,69,70,70,70,72,72,72,74,74,74,75,75,75,77,77,77,78,78,78,80,80,80,81,81,81,83,83,83,84,84,84,86,86,86,87,87,87,88,88,88,90,90,90,91,91,91,92,92,92,94,94,94,95,95,95,96,96,96,97,97,97,99,99,99,100,100,100,101,101,101,102,102,102,104,104,104,105,105,105,106,106,106,107,107,107,108,108,108,109,109,109,110,110,110,112,112,112,113,113,113,114,114,114,115,115,115,116,116,116,117,117,117,118,118,118,119,119,119,120,120,120,121,121,121,122,122,122,123,123,123,124,124,124,125,125,125,126,126,126,127,127,127,128,128,128,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,135,135,135,136,136,136,137,137,137,138,138,138,139,139,139,139,139,139,140,140,140,141,141,141,142,142,142,143,143,143,144,144,144,145,145,145,146,146,146,147,147,147,147,147,147,148,148,148,149,149,149,150,150,150,151,151,151,152,152,152,152,152,152,153,153,153,154,154,154,155,155,155,156,156,156,157,157,157,157,157,157,158,158,158,159,159,159,160,160,160,161,161,161,161,161,161,162,162,162,163,163,163,164,164,164,165,165,165,165,165,165,166,166,166,167,167,167,168,168,168,168,168,168,169,169,169,170,170,170,171,171,171,171,171,171,172,172,172,173,173,173,174,174,174,174,174,174,175,175,175,176,176,176,177,177,177,177,177,177,178,178,178,179,179,179,180,180,180,180,180,180,181,181,181,182,182,182,182,182,182,183,183,183,184,184,184,185,185,185,185,185,185,186,186,186,187,187,187,187,187,187,188,188,188,189,189,189,189,189,189,190,190,190,191,191,191,192,192,192,192,192,192,193,193,193,194,194,194,194,194,194,195,195,195,196,196,196,196,196,196,197,197,197,198,198,198,198,198,198,199,199,199,200,200,200,200,200,200,201,201,201,201,201,201,202,202,202,203,203,203,203,203,203,204,204,204,205,205,205,205,205,205,206,206,206,207,207,207,207,207,207,208,208,208,209,209,209,209,209,209,210,210,210,210,210,210,211,211,211,212,212,212,212,212,212,213,213,213,214,214,214,214,214,214,215,215,215,215,215,215,216,216,216,217,217,217,217,217,217,218,218,218,218,218,218,219,219,219,220,220,220,220,220,220,221,221,221,221,221,221,222,222,222,223,223,223,223,223,223,224,224,224,224,224,224,225,225,225,226,226,226,226,226,226,227,227,227,227,227,227,228,228,228,228,228,228,229,229,229,230,230,230,230,230,230,231,231,231,231,231,231,232,232,232,233,233,233,233,233,233,234,234,234,234,234,234,235,235,235,235,235,235,236,236,236,236,236,236,237,237,237,238,238,238,238,238,238,239,239,239,239,239,239,240,240,240,240,240,240,241,241,241,242,242,242,242,242,242,243,243,243,243,243,243,244,244,244,244,244,244,245,245,245,245,245,245,246,246,246,246,246,246,247,247,247,248,248,248,248,248,248,249,249,249,249,249,249,250,250,250,250,250,250,251,251,251,251,251,251,252,252,252,252,252,252,253,253,253,253,253,253,254,254,254,254,254,254,255,255,255
		};

		private static readonly byte[] Gamma_2_1 = new byte[256*3]
		{
			0,0,0,18,18,18,25,25,25,31,31,31,35,35,35,39,39,39,43,43,43,46,46,46,49,49,49,52,52,52,55,55,55,57,57,57,59,59,59,62,62,62,64,64,64,66,66,66,68,68,68,70,70,70,72,72,72,74,74,74,76,76,76,78,78,78,79,79,79,81,81,81,83,83,83,84,84,84,86,86,86,88,88,88,89,89,89,91,91,91,92,92,92,93,93,93,95,95,95,96,96,96,98,98,98,99,99,99,100,100,100,102,102,102,103,103,103,104,104,104,106,106,106,107,107,107,108,108,108,109,109,109,110,110,110,112,112,112,113,113,113,114,114,114,115,115,115,116,116,116,117,117,117,118,118,118,120,120,120,121,121,121,122,122,122,123,123,123,124,124,124,125,125,125,126,126,126,127,127,127,128,128,128,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,135,135,135,136,136,136,137,137,137,138,138,138,139,139,139,140,140,140,141,141,141,141,141,141,142,142,142,143,143,143,144,144,144,145,145,145,146,146,146,147,147,147,148,148,148,149,149,149,149,149,149,150,150,150,151,151,151,152,152,152,153,153,153,154,154,154,154,154,154,155,155,155,156,156,156,157,157,157,158,158,158,159,159,159,159,159,159,160,160,160,161,161,161,162,162,162,163,163,163,163,163,163,164,164,164,165,165,165,166,166,166,166,166,166,167,167,167,168,168,168,169,169,169,169,169,169,170,170,170,171,171,171,172,172,172,172,172,172,173,173,173,174,174,174,175,175,175,175,175,175,176,176,176,177,177,177,177,177,177,178,178,178,179,179,179,180,180,180,180,180,180,181,181,181,182,182,182,182,182,182,183,183,183,184,184,184,184,184,184,185,185,185,186,186,186,186,186,186,187,187,187,188,188,188,188,188,188,189,189,189,190,190,190,190,190,190,191,191,191,192,192,192,192,192,192,193,193,193,194,194,194,194,194,194,195,195,195,196,196,196,196,196,196,197,197,197,197,197,197,198,198,198,199,199,199,199,199,199,200,200,200,201,201,201,201,201,201,202,202,202,202,202,202,203,203,203,204,204,204,204,204,204,205,205,205,205,205,205,206,206,206,207,207,207,207,207,207,208,208,208,208,208,208,209,209,209,210,210,210,210,210,210,211,211,211,211,211,211,212,212,212,213,213,213,213,213,213,214,214,214,214,214,214,215,215,215,215,215,215,216,216,216,217,217,217,217,217,217,218,218,218,218,218,218,219,219,219,219,219,219,220,220,220,221,221,221,221,221,221,222,222,222,222,222,222,223,223,223,223,223,223,224,224,224,224,224,224,225,225,225,226,226,226,226,226,226,227,227,227,227,227,227,228,228,228,228,228,228,229,229,229,229,229,229,230,230,230,230,230,230,231,231,231,231,231,231,232,232,232,232,232,232,233,233,233,234,234,234,234,234,234,235,235,235,235,235,235,236,236,236,236,236,236,237,237,237,237,237,237,238,238,238,238,238,238,239,239,239,239,239,239,240,240,240,240,240,240,241,241,241,241,241,241,242,242,242,242,242,242,243,243,243,243,243,243,244,244,244,244,244,244,245,245,245,245,245,245,246,246,246,246,246,246,247,247,247,247,247,247,248,248,248,248,248,248,249,249,249,249,249,249,250,250,250,250,250,250,251,251,251,251,251,251,252,252,252,252,252,252,253,253,253,253,253,253,254,254,254,254,254,254,255,255,255,255,255,255
		};

		private static readonly byte[] Gamma_2_3 = new byte[256*3]
		{
			0,0,0,23,23,23,31,31,31,37,37,37,42,42,42,46,46,46,50,50,50,53,53,53,57,57,57,60,60,60,62,62,62,65,65,65,68,68,68,70,70,70,72,72,72,74,74,74,77,77,77,79,79,79,81,81,81,82,82,82,84,84,84,86,86,86,88,88,88,90,90,90,91,91,91,93,93,93,94,94,94,96,96,96,98,98,98,99,99,99,101,101,101,102,102,102,103,103,103,105,105,105,106,106,106,108,108,108,109,109,109,110,110,110,111,111,111,113,113,113,114,114,114,115,115,115,116,116,116,118,118,118,119,119,119,120,120,120,121,121,121,122,122,122,123,123,123,124,124,124,126,126,126,127,127,127,128,128,128,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,135,135,135,136,136,136,137,137,137,138,138,138,139,139,139,140,140,140,141,141,141,142,142,142,143,143,143,144,144,144,144,144,144,145,145,145,146,146,146,147,147,147,148,148,148,149,149,149,150,150,150,151,151,151,152,152,152,152,152,152,153,153,153,154,154,154,155,155,155,156,156,156,157,157,157,157,157,157,158,158,158,159,159,159,160,160,160,161,161,161,161,161,161,162,162,162,163,163,163,164,164,164,164,164,164,165,165,165,166,166,166,167,167,167,168,168,168,168,168,168,169,169,169,170,170,170,170,170,170,171,171,171,172,172,172,173,173,173,173,173,173,174,174,174,175,175,175,176,176,176,176,176,176,177,177,177,178,178,178,178,178,178,179,179,179,180,180,180,180,180,180,181,181,181,182,182,182,182,182,182,183,183,183,184,184,184,184,184,184,185,185,185,186,186,186,186,186,186,187,187,187,188,188,188,188,188,188,189,189,189,190,190,190,190,190,190,191,191,191,192,192,192,192,192,192,193,193,193,193,193,193,194,194,194,195,195,195,195,195,195,196,196,196,196,196,196,197,197,197,198,198,198,198,198,198,199,199,199,200,200,200,200,200,200,201,201,201,201,201,201,202,202,202,202,202,202,203,203,203,204,204,204,204,204,204,205,205,205,205,205,205,206,206,206,207,207,207,207,207,207,208,208,208,208,208,208,209,209,209,209,209,209,210,210,210,210,210,210,211,211,211,212,212,212,212,212,212,213,213,213,213,213,213,214,214,214,214,214,214,215,215,215,215,215,215,216,216,216,216,216,216,217,217,217,218,218,218,218,218,218,219,219,219,219,219,219,220,220,220,220,220,220,221,221,221,221,221,221,222,222,222,222,222,222,223,223,223,223,223,223,224,224,224,224,224,224,225,225,225,225,225,225,226,226,226,226,226,226,227,227,227,227,227,227,228,228,228,228,228,228,229,229,229,229,229,229,230,230,230,230,230,230,231,231,231,231,231,231,232,232,232,232,232,232,233,233,233,233,233,233,234,234,234,234,234,234,235,235,235,235,235,235,236,236,236,236,236,236,237,237,237,237,237,237,238,238,238,238,238,238,239,239,239,239,239,239,240,240,240,240,240,240,241,241,241,241,241,241,241,241,241,242,242,242,242,242,242,243,243,243,243,243,243,244,244,244,244,244,244,245,245,245,245,245,245,246,246,246,246,246,246,247,247,247,247,247,247,247,247,247,248,248,248,248,248,248,249,249,249,249,249,249,250,250,250,250,250,250,251,251,251,251,251,251,251,251,251,252,252,252,252,252,252,253,253,253,253,253,253,254,254,254,254,254,254,255,255,255,255,255,255
		};
		
		private static readonly byte[] Gamma_2_5 = new byte[256*3]
		{
			0,0,0,28,28,28,37,37,37,43,43,43,48,48,48,53,53,53,57,57,57,61,61,61,64,64,64,67,67,67,70,70,70,73,73,73,75,75,75,78,78,78,80,80,80,82,82,82,84,84,84,86,86,86,88,88,88,90,90,90,92,92,92,94,94,94,96,96,96,97,97,97,99,99,99,101,101,101,102,102,102,104,104,104,105,105,105,107,107,107,108,108,108,110,110,110,111,111,111,113,113,113,114,114,114,115,115,115,117,117,117,118,118,118,119,119,119,120,120,120,122,122,122,123,123,123,124,124,124,125,125,125,126,126,126,127,127,127,129,129,129,130,130,130,131,131,131,132,132,132,133,133,133,134,134,134,135,135,135,136,136,136,137,137,137,138,138,138,139,139,139,140,140,140,141,141,141,142,142,142,143,143,143,144,144,144,145,145,145,146,146,146,147,147,147,148,148,148,149,149,149,149,149,149,150,150,150,151,151,151,152,152,152,153,153,153,154,154,154,155,155,155,155,155,155,156,156,156,157,157,157,158,158,158,159,159,159,160,160,160,160,160,160,161,161,161,162,162,162,163,163,163,164,164,164,164,164,164,165,165,165,166,166,166,167,167,167,167,167,167,168,168,168,169,169,169,170,170,170,170,170,170,171,171,171,172,172,172,173,173,173,173,173,173,174,174,174,175,175,175,175,175,175,176,176,176,177,177,177,177,177,177,178,178,178,179,179,179,179,179,179,180,180,180,181,181,181,182,182,182,182,182,182,183,183,183,183,183,183,184,184,184,185,185,185,185,185,185,186,186,186,187,187,187,187,187,187,188,188,188,189,189,189,189,189,189,190,190,190,190,190,190,191,191,191,192,192,192,192,192,192,193,193,193,194,194,194,194,194,194,195,195,195,195,195,195,196,196,196,197,197,197,197,197,197,198,198,198,198,198,198,199,199,199,199,199,199,200,200,200,201,201,201,201,201,201,202,202,202,202,202,202,203,203,203,203,203,203,204,204,204,205,205,205,205,205,205,206,206,206,206,206,206,207,207,207,207,207,207,208,208,208,208,208,208,209,209,209,209,209,209,210,210,210,211,211,211,211,211,211,212,212,212,212,212,212,213,213,213,213,213,213,214,214,214,214,214,214,215,215,215,215,215,215,216,216,216,216,216,216,217,217,217,217,217,217,218,218,218,218,218,218,219,219,219,219,219,219,220,220,220,220,220,220,221,221,221,221,221,221,222,222,222,222,222,222,223,223,223,223,223,223,224,224,224,224,224,224,225,225,225,225,225,225,226,226,226,226,226,226,227,227,227,227,227,227,228,228,228,228,228,228,229,229,229,229,229,229,230,230,230,230,230,230,230,230,230,231,231,231,231,231,231,232,232,232,232,232,232,233,233,233,233,233,233,234,234,234,234,234,234,235,235,235,235,235,235,235,235,235,236,236,236,236,236,236,237,237,237,237,237,237,238,238,238,238,238,238,239,239,239,239,239,239,240,240,240,240,240,240,240,240,240,241,241,241,241,241,241,242,242,242,242,242,242,243,243,243,243,243,243,243,243,243,244,244,244,244,244,244,245,245,245,245,245,245,246,246,246,246,246,246,246,246,246,247,247,247,247,247,247,248,248,248,248,248,248,248,248,248,249,249,249,249,249,249,250,250,250,250,250,250,251,251,251,251,251,251,251,251,251,252,252,252,252,252,252,253,253,253,253,253,253,253,253,253,254,254,254,254,254,254,255,255,255,255,255,255
		};
		private static readonly BitmapPalette DefaultPalette = CreatePalette(Gray);
		private static readonly BitmapPalette GrayPalette = CreatePalette(Gray);
		private static readonly BitmapPalette RainbowPalette = CreatePalette(Rainbow);
		private static readonly BitmapPalette GradientPalette = CreatePalette(Gradient);
		private static readonly BitmapPalette TemperaturePalette = CreatePalette(Temperature);
		private static readonly BitmapPalette BinaryPalette = CreatePalette(Binary);
		private static readonly BitmapPalette InvertedGrayPalette = CreatePalette(GrayInverted);
		private static readonly BitmapPalette Gamma_1_1_Palette = CreatePalette(Gamma_1_1);
		private static readonly BitmapPalette Gamma_1_3_Palette = CreatePalette(Gamma_1_3);
		private static readonly BitmapPalette Gamma_1_5_Palette = CreatePalette(Gamma_1_5);
		private static readonly BitmapPalette Gamma_1_7_Palette = CreatePalette(Gamma_1_7);
		private static readonly BitmapPalette Gamma_1_9_Palette = CreatePalette(Gamma_1_9);
		private static readonly BitmapPalette Gamma_2_1_Palette = CreatePalette(Gamma_2_1);
		private static readonly BitmapPalette Gamma_2_3_Palette = CreatePalette(Gamma_2_3);
		private static readonly BitmapPalette Gamma_2_5_Palette = CreatePalette(Gamma_2_5);


		private static BitmapPalette CreatePalette(byte[] palette)
		{
			List<Color> list = new List<Color>(256);
			if (256 * 3 == palette.Length){
				for (int i = 0; i < 256 * 3; i += 3){
					list.Add(Color.FromArgb(byte.MaxValue, palette[i], palette[i + 1], palette[i + 2]));
				}
			}
			return new BitmapPalette(list);
		}

		public static BitmapPalette GetPalette(PaletteType paletteType)
		{
			switch (paletteType){
				default:
					return DefaultPalette;
				case PaletteType.Gray:
					return GrayPalette;
				case PaletteType.Binary:
					return BinaryPalette;
				case PaletteType.Gradient:
					return GradientPalette;
				case PaletteType.Rainbow:
					return RainbowPalette;
				case PaletteType.Temperature:
					return TemperaturePalette;
				case PaletteType.InvertedGray:
					return InvertedGrayPalette;
				case PaletteType.Gamma_1_1:
					return Gamma_1_1_Palette;
				case PaletteType.Gamma_1_3:
					return Gamma_1_3_Palette;
				case PaletteType.Gamma_1_5:
					return Gamma_1_5_Palette;
				case PaletteType.Gamma_1_7:
					return Gamma_1_7_Palette;
				case PaletteType.Gamma_1_9:
					return Gamma_1_9_Palette;
				case PaletteType.Gamma_2_1:
					return Gamma_2_1_Palette;
				case PaletteType.Gamma_2_3:
					return Gamma_2_3_Palette;
				case PaletteType.Gamma_2_5:
					return Gamma_2_5_Palette;
			}
		}
	}
}
